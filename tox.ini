[tox]
envlist = py38, py39, py310, black, docs
isolated_build = True

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310, black, docs

[testenv]
description =
    Run tests
allowlist_externals =
    docker
    docker-compose
deps =
    pytest
    coverage
commands =
    coverage run -m pytest --tb=auto
    coverage xml

[testenv:black]
description =
    Test code for black compliance
deps =
    black
commands =
    black --check src/pyrrowhead tests/

[testenv:docs]
description =
    Build docs
deps =
    sphinx
    -rdocs/requirements.txt
changedir =
    docs
commands =
    make html


