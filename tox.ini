[tox]
envlist = py38, py39, py310, black, docs
isolated_build = True

[gh-actions]
python =
    3.8: py38
    3.9: py39
    3.10: py310, black, docs

[testenv]
description =
    Run tests
allowlist_externals =
    docker
    docker-compose
deps =
    pytest
commands =
    pytest --tb=auto

[testenv:black]
description =
    Test code for black compliance
deps =
    black
commands =
    black --check src/pyrrowhead tests/

[testenv:docs]
description =
    Build docs
changedir =
    docs
deps =
    sphinx
    -rrequirements.txt
commands =
    make html


